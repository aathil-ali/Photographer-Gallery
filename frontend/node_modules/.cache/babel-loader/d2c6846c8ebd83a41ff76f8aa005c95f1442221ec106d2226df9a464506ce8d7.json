{"ast":null,"code":"import _regeneratorRuntime from \"/opt/homebrew/var/www/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/opt/homebrew/var/www/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n// store/albums.js\nvar state = {\n  albums: []\n};\nvar getters = {\n  albums: function albums(state) {\n    return state.albums;\n  }\n};\nvar actions = {\n  fetchAlbums: function () {\n    var _fetchAlbums = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {\n      var commit, rootGetters, token, response, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            commit = _ref.commit, rootGetters = _ref.rootGetters;\n            _context.prev = 1;\n            token = rootGetters['authModule/authToken']; // Check if the token is available\n            if (token) {\n              _context.next = 6;\n              break;\n            }\n            console.error('Token not available');\n            return _context.abrupt(\"return\");\n          case 6:\n            _context.next = 8;\n            return fetch('http://127.0.0.1:8000/api/album', {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': \"Bearer \".concat(token)\n              }\n            });\n          case 8:\n            response = _context.sent;\n            _context.next = 11;\n            return response.json();\n          case 11:\n            data = _context.sent;\n            if (response.ok) {\n              _context.next = 14;\n              break;\n            }\n            throw new Error(data.message || 'Failed to fetch albums');\n          case 14:\n            // Commit the fetched albums to the Vuex store\n            commit('setAlbums', data);\n            _context.next = 20;\n            break;\n          case 17:\n            _context.prev = 17;\n            _context.t0 = _context[\"catch\"](1);\n            console.error('Error fetching albums:', _context.t0.message);\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[1, 17]]);\n    }));\n    function fetchAlbums(_x) {\n      return _fetchAlbums.apply(this, arguments);\n    }\n    return fetchAlbums;\n  }()\n};\nvar mutations = {\n  setAlbums: function setAlbums(state, albums) {\n    state.albums = albums;\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};","map":{"version":3,"names":["state","albums","getters","actions","fetchAlbums","_fetchAlbums","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","commit","rootGetters","token","response","data","wrap","_callee$","_context","prev","next","console","error","abrupt","fetch","method","headers","concat","sent","json","ok","Error","message","t0","stop","_x","apply","arguments","mutations","setAlbums"],"sources":["/opt/homebrew/var/www/frontend/src/store/albums.js"],"sourcesContent":["// store/albums.js\nconst state = {\n    albums: [],\n  };\n  \n  const getters = {\n    albums: (state) => state.albums,\n  };\n  \n  const actions = {\n    fetchAlbums: async ({ commit, rootGetters }) => {\n      try {\n        const token = rootGetters['authModule/authToken'];\n  \n        // Check if the token is available\n        if (!token) {\n          console.error('Token not available');\n          return;\n        }\n  \n        const response = await fetch('http://127.0.0.1:8000/api/album', {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n  \n        const data = await response.json();\n  \n        if (!response.ok) {\n          throw new Error(data.message || 'Failed to fetch albums');\n        }\n  \n        // Commit the fetched albums to the Vuex store\n        commit('setAlbums', data);\n  \n      } catch (error) {\n        console.error('Error fetching albums:', error.message);\n      }\n    },\n  };\n  \n  const mutations = {\n    setAlbums: (state, albums) => {\n      state.albums = albums;\n    },\n  };\n  \n  export default {\n    state,\n    getters,\n    actions,\n    mutations,\n  };\n  "],"mappings":";;;AAAA;AACA,IAAMA,KAAK,GAAG;EACVC,MAAM,EAAE;AACV,CAAC;AAED,IAAMC,OAAO,GAAG;EACdD,MAAM,EAAE,SAAAA,OAACD,KAAK;IAAA,OAAKA,KAAK,CAACC,MAAM;EAAA;AACjC,CAAC;AAED,IAAME,OAAO,GAAG;EACdC,WAAW;IAAA,IAAAC,YAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAAC,IAAA;MAAA,IAAAC,MAAA,EAAAC,WAAA,EAAAC,KAAA,EAAAC,QAAA,EAAAC,IAAA;MAAA,OAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAST,MAAM,GAAAD,IAAA,CAANC,MAAM,EAAEC,WAAW,GAAAF,IAAA,CAAXE,WAAW;YAAAM,QAAA,CAAAC,IAAA;YAE/BN,KAAK,GAAGD,WAAW,CAAC,sBAAsB,CAAC,EAEjD;YAAA,IACKC,KAAK;cAAAK,QAAA,CAAAE,IAAA;cAAA;YAAA;YACRC,OAAO,CAACC,KAAK,CAAC,qBAAqB,CAAC;YAAC,OAAAJ,QAAA,CAAAK,MAAA;UAAA;YAAAL,QAAA,CAAAE,IAAA;YAAA,OAIhBI,KAAK,CAAC,iCAAiC,EAAE;cAC9DC,MAAM,EAAE,KAAK;cACbC,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;gBAClC,eAAe,YAAAC,MAAA,CAAYd,KAAK;cAClC;YACF,CAAC,CAAC;UAAA;YANIC,QAAQ,GAAAI,QAAA,CAAAU,IAAA;YAAAV,QAAA,CAAAE,IAAA;YAAA,OAQKN,QAAQ,CAACe,IAAI,CAAC,CAAC;UAAA;YAA5Bd,IAAI,GAAAG,QAAA,CAAAU,IAAA;YAAA,IAELd,QAAQ,CAACgB,EAAE;cAAAZ,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAA,MACR,IAAIW,KAAK,CAAChB,IAAI,CAACiB,OAAO,IAAI,wBAAwB,CAAC;UAAA;YAG3D;YACArB,MAAM,CAAC,WAAW,EAAEI,IAAI,CAAC;YAACG,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAe,EAAA,GAAAf,QAAA;YAG1BG,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEJ,QAAA,CAAAe,EAAA,CAAMD,OAAO,CAAC;UAAC;UAAA;YAAA,OAAAd,QAAA,CAAAgB,IAAA;QAAA;MAAA,GAAAzB,OAAA;IAAA,CAE1D;IAAA,SAAAL,YAAA+B,EAAA;MAAA,OAAA9B,YAAA,CAAA+B,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAAjC,WAAA;EAAA;AACH,CAAC;AAED,IAAMkC,SAAS,GAAG;EAChBC,SAAS,EAAE,SAAAA,UAACvC,KAAK,EAAEC,MAAM,EAAK;IAC5BD,KAAK,CAACC,MAAM,GAAGA,MAAM;EACvB;AACF,CAAC;AAED,eAAe;EACbD,KAAK,EAALA,KAAK;EACLE,OAAO,EAAPA,OAAO;EACPC,OAAO,EAAPA,OAAO;EACPmC,SAAS,EAATA;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}