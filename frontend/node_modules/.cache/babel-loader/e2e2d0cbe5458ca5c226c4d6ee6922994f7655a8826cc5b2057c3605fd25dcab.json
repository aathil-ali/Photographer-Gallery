{"ast":null,"code":"import _defineProperty from \"/opt/homebrew/var/www/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/opt/homebrew/var/www/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/opt/homebrew/var/www/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n// store/auth.js\nvar state = {\n  token: localStorage.getItem('token') || '',\n  status: ''\n};\nvar getters = {\n  isLoggedIn: function isLoggedIn(state) {\n    return !!state.token;\n  },\n  authStatus: function authStatus(state) {\n    return state.status;\n  },\n  authToken: function authToken(state) {\n    return state.token;\n  }\n};\nvar actions = _defineProperty({\n  logout: function () {\n    var _logout = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {\n      var commit, response;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            commit = _ref.commit;\n            _context.prev = 1;\n            _context.next = 4;\n            return fetch('http://127.0.0.1:8000/api/logout', {\n              method: 'POST',\n              headers: {\n                'Authorization': \"Bearer \".concat(state.token),\n                // Include the token in the headers\n                'Content-Type': 'application/json'\n              }\n            });\n          case 4:\n            response = _context.sent;\n            if (response.ok) {\n              _context.next = 7;\n              break;\n            }\n            throw new Error('Failed to logout');\n          case 7:\n            // Remove the token from local storage and Vuex state\n            localStorage.removeItem('token');\n            commit('logout');\n\n            // Return the success response to handle routing in the Vue component\n            return _context.abrupt(\"return\", {\n              success: true\n            });\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](1);\n            return _context.abrupt(\"return\", {\n              success: false,\n              message: _context.t0.message\n            });\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[1, 12]]);\n    }));\n    function logout(_x) {\n      return _logout.apply(this, arguments);\n    }\n    return logout;\n  }(),\n  register: function () {\n    var _register = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2, userData) {\n      var commit, response, responseData;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            commit = _ref2.commit;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return fetch('http://127.0.0.1:8000/api/register', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(userData)\n            });\n          case 4:\n            response = _context2.sent;\n            _context2.next = 7;\n            return response.json();\n          case 7:\n            responseData = _context2.sent;\n            if (!responseData.success) {\n              _context2.next = 12;\n              break;\n            }\n            commit('SET_USER', responseData.user);\n            _context2.next = 13;\n            break;\n          case 12:\n            throw new Error(responseData.message);\n          case 13:\n            // Handle successful registration response\n            console.log('User successfully registered:', responseData);\n            return _context2.abrupt(\"return\", {\n              success: true\n            });\n          case 17:\n            _context2.prev = 17;\n            _context2.t0 = _context2[\"catch\"](1);\n            throw new Error(_context2.t0.message);\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[1, 17]]);\n    }));\n    function register(_x2, _x3) {\n      return _register.apply(this, arguments);\n    }\n    return register;\n  }(),\n  login: function () {\n    var _login = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref3, credentials) {\n      var commit, _responseData$data, response, responseData, token;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            commit = _ref3.commit;\n            _context3.prev = 1;\n            _context3.next = 4;\n            return fetch('http://127.0.0.1:8000/api/login', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(credentials)\n            });\n          case 4:\n            response = _context3.sent;\n            _context3.next = 7;\n            return response.json();\n          case 7:\n            responseData = _context3.sent;\n            if (response.ok) {\n              _context3.next = 10;\n              break;\n            }\n            throw new Error(responseData.message || 'Failed to login');\n          case 10:\n            token = responseData === null || responseData === void 0 || (_responseData$data = responseData.data) === null || _responseData$data === void 0 || (_responseData$data = _responseData$data.authorization) === null || _responseData$data === void 0 ? void 0 : _responseData$data.token;\n            localStorage.setItem('token', token);\n            commit('loginSuccess', token);\n\n            // Return the success response to handle routing in the Vue component\n            return _context3.abrupt(\"return\", {\n              success: true\n            });\n          case 16:\n            _context3.prev = 16;\n            _context3.t0 = _context3[\"catch\"](1);\n            commit('loginFailure', _context3.t0.message);\n\n            // Return the error response to handle routing in the Vue component\n            return _context3.abrupt(\"return\", {\n              success: false,\n              message: _context3.t0.message\n            });\n          case 20:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[1, 16]]);\n    }));\n    function login(_x4, _x5) {\n      return _login.apply(this, arguments);\n    }\n    return login;\n  }()\n}, \"logout\", function logout(_ref4) {\n  var commit = _ref4.commit;\n  localStorage.removeItem('token');\n  commit('logout');\n});\nvar mutations = {\n  loginSuccess: function loginSuccess(state, token) {\n    state.token = token;\n    state.status = 'success';\n  },\n  loginFailure: function loginFailure(state, errorMessage) {\n    state.token = '';\n    state.status = errorMessage;\n  },\n  logout: function logout(state) {\n    state.token = '';\n  },\n  SET_USER: function SET_USER(state, user) {\n    state.user = user;\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};","map":{"version":3,"names":["state","token","localStorage","getItem","status","getters","isLoggedIn","authStatus","authToken","actions","_defineProperty","logout","_logout","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","commit","response","wrap","_callee$","_context","prev","next","fetch","method","headers","concat","sent","ok","Error","removeItem","abrupt","success","t0","message","stop","_x","apply","arguments","register","_register","_callee2","_ref2","userData","responseData","_callee2$","_context2","body","JSON","stringify","json","user","console","log","_x2","_x3","login","_login","_callee3","_ref3","credentials","_responseData$data","_callee3$","_context3","data","authorization","setItem","_x4","_x5","_ref4","mutations","loginSuccess","loginFailure","errorMessage","SET_USER"],"sources":["/opt/homebrew/var/www/frontend/src/store/auth.js"],"sourcesContent":["\n// store/auth.js\nconst state = {\n  token: localStorage.getItem('token') || '',\n  status: '',\n};\n\nconst getters = {\n  isLoggedIn: (state) => !!state.token,\n  authStatus: (state) => state.status,\n  authToken: (state) => state.token,\n};\n\nconst actions = {\n\n  logout: async ({ commit }) => {\n    try {\n      // Call the API endpoint for user logout (if applicable)\n      // For example, you might want to send a request to your backend to invalidate the token\n\n      // Assuming you have an API endpoint for logout in your Laravel backend\n      const response = await fetch('http://127.0.0.1:8000/api/logout', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${state.token}`, // Include the token in the headers\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to logout');\n      }\n\n      // Remove the token from local storage and Vuex state\n      localStorage.removeItem('token');\n      commit('logout');\n\n      // Return the success response to handle routing in the Vue component\n      return { success: true };\n    } catch (error) {\n      // Return the error response to handle routing in the Vue component\n      return { success: false, message: error.message };\n    }\n  },\n  \n  register: async ({ commit }, userData) => {\n    try {\n      const response = await fetch('http://127.0.0.1:8000/api/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(userData),\n      });\n  \n      const responseData = await response.json();\n  \n      if (responseData.success) {\n        commit('SET_USER', responseData.user);\n    \n      } else {\n        throw new Error(responseData.message);\n      }\n  \n      // Handle successful registration response\n      console.log('User successfully registered:', responseData);\n\n      return { success: true };\n\n\n      // Handle successful registration response\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  },\n  login: async ({ commit }, credentials) => {\n    try {\n      const response = await fetch('http://127.0.0.1:8000/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(credentials),\n      });\n\n      const responseData = await response.json();\n\n      if (!response.ok) {\n        throw new Error(responseData.message || 'Failed to login');\n      }\n\n      const token = responseData?.data?.authorization?.token;\n      localStorage.setItem('token', token);\n      commit('loginSuccess', token);\n\n      // Return the success response to handle routing in the Vue component\n      return { success: true };\n    } catch (error) {\n      commit('loginFailure', error.message);\n\n      // Return the error response to handle routing in the Vue component\n      return { success: false, message: error.message };\n    }\n  },\n  logout: ({ commit }) => {\n    localStorage.removeItem('token');\n    commit('logout');\n  },\n};\n\nconst mutations = {\n  loginSuccess: (state, token) => {\n    state.token = token;\n    state.status = 'success';\n  },\n  loginFailure: (state, errorMessage) => {\n    state.token = '';\n    state.status = errorMessage;\n  },\n  logout: (state) => {\n    state.token = '';\n  },\n  SET_USER(state, user) {\n    state.user = user;\n  },\n};\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}